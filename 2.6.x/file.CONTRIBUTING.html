<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>
  File: CONTRIBUTING
  
    &mdash; Documentation by YARD 0.7.5
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/docco.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/docco.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html" title="Index">Index</a> &raquo; 
    <span class="title">File: CONTRIBUTING</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><div id='filecontents'><h1>Checklist (and a short version for the impatient)</h1>

<ul>
<li><p>Commits:</p>

<ul>
<li>Make commits of logical units.</li>
<li>Check for unnecessary whitespace with &quot;git diff --check&quot; before
committing.</li>
<li>Commit using Unix line endings (check the settings around &quot;crlf&quot; in
git-config(1)).</li>
<li>Do not check in commented out code or unneeded files.</li>
<li>The first line of the commit message should be a short
description (50 characters is the soft limit, excluding ticket
number(s)), and should skip the full stop.</li>
<li>If there is an associated Redmine ticket then the first line
should include the ticket number in the form &quot;(#XXXX) Rest of
message&quot;.</li>
<li>The body should provide a meaningful commit message, which:

<ul>
<li>uses the imperative, present tense: &quot;change&quot;, not &quot;changed&quot; or
&quot;changes&quot;.</li>
<li>includes motivation for the change, and contrasts its
implementation with the previous behavior.</li>
</ul></li>
<li>Make sure that you have tests for the bug you are fixing, or
feature you are adding.</li>
<li>Make sure the test suite passes after your commit (rake spec unit).</li>
</ul></li>
<li><p>Submission:</p>

<ul>
<li>Pre-requisites:

<ul>
<li>Make sure you have a <a href="http://projects.puppetlabs.com">Redmine account</a></li>
<li>Sign the <a href="https://projects.puppetlabs.com/contributor_licenses/sign">Contributor License Agreement</a></li>
</ul></li>
<li>Preferred method:

<ul>
<li>Fork the repository on GitHub.</li>
<li>Push your changes to a topic branch in your fork of the
repository.</li>
<li>Submit a pull request to the repository in the puppetlabs
organization.</li>
</ul></li>
<li>Alternate methods:

<ul>
<li>Mail patches to puppet-dev mailing list using <code>rake mail_patches</code>,
or <code>git-format-patch(1)</code> &amp; <code>git-send-email(1)</code>.</li>
<li>Attach patches to Redmine ticket.</li>
</ul></li>
</ul></li>
</ul>

<h1>The long version</h1>

<ol>
<li><p>Decide what to base your work on.</p>

<p>In general, you should always base your work on the oldest
  branch that your change is relevant to.</p></li>
</ol>

<pre class="code ruby"><code>  - A bug fix should be based on the current stable series. If the
    bug is not present in the current stable release, then base it on
    `master`.

  - A new feature should be based on `master`.

  - Security fixes should be based on the current maintenance series
    (that is, the previous stable series).  If the security issue
    was not present in the maintenance series, then it should be
    based on the current stable series if it was introduced there,
    or on `master` if it is not yet present in a stable release.

  The current stable series is 2.7.x, and the current maintenance
  series is 2.6.x.
</code></pre>

<ol>
<li><p>Make separate commits for logically separate changes.</p>

<p>Please break your commits down into logically consistent units
  which include new or changed tests relevent to the rest of the
  change.  The goal of doing this is to make the diff easier to
  read for whoever is reviewing your code.  In general, the easier
  your diff is to read, the more likely someone will be happy to
  review it and get it into the code base.</p>

<p>If you&#39;re going to refactor a piece of code, please do so as a
  separate commit from your feature or bug fix changes.</p>

<p>We also really appreciate changes that include tests to make
  sure the bug isn&#39;t re-introduced, and that the feature isn&#39;t
  accidentally broken.</p>

<p>Describe the technical detail of the change(s).  If your
  description starts to get too long, that&#39;s a good sign that you
  probably need to split up your commit into more finely grained
  pieces.</p>

<p>Commits which plainly describe the the things which help
  reviewers check the patch and future developers understand the
  code are much more likely to be merged in with a minimum of
  bike-shedding or requested changes.  Ideally, the commit message
  would include information, and be in a form suitable for
  inclusion in the release notes for the version of Puppet that
  includes them.</p>

<p>Please also check that you are not introducing any trailing
  whitespaces or other &quot;whitespace errors&quot;.  You can do this by
  running &quot;git diff --check&quot; on your changes before you commit.</p></li>
<li><p>Sign the Contributor License Agreement</p>

<p>Before we can accept your changes, we do need a signed Puppet
  Labs Contributor License Agreement (CLA).</p>

<p>You can access the CLA via the
  <a href="https://projects.puppetlabs.com/contributor_licenses/sign">Contributor License Agreement link</a>
  in the top menu bar of our Redmine instance.  Once you&#39;ve signed
  the CLA, a badge will show up next to your name on the
  <a href="http://projects.puppetlabs.com/projects/puppet?jump=welcome">Puppet Project Overview Page</a>,
  and your name will be listed under &quot;Contributor License Signers&quot;
  section.</p>

<p>If you have any questions about the CLA, please feel free to
  contact Puppet Labs via email at <a href="mailto:cla-submissions@puppetlabs.com">cla-submissions@puppetlabs.com</a>.</p></li>
<li><p>Sending your patches</p>

<p>We accept multiple ways of submitting your changes for
  inclusion.  They are listed below in order of preference.</p>

<p>Please keep in mind that any method that involves sending email
  to the mailing list directly requires you to be subscribed to
  the mailing list, and that your first post to the list will be
  held in a moderation queue.</p></li>
</ol>

<pre class="code ruby"><code>  * GitHub Pull Requests

    To submit your changes via a GitHub pull request, we _highly_
    recommend that you have them on a topic branch, instead of
    directly on &quot;master&quot; or one of the release, or RC branches.
    It makes things much easier to keep track of, especially if
    you decide to work on another thing before your first change
    is merged in.

    GitHub has some pretty good
    [general documentation](http://help.github.com/) on using
    their site.  They also have documentation on
    [creating pull requests](http://help.github.com/send-pull-requests/).

    In general, after pushing your topic branch up to your
    repository on GitHub, you'll switch to the branch in the
    GitHub UI and click &quot;Pull Request&quot; towards the top of the page
    in order to open a pull request.

    You'll want to make sure that you have the appropriate
    destination branch in the repository under the puppetlabs
    organization.  This should be the same branch that you based
    your changes off of.

  * Other pull requests

    If you already have a publicly accessible version of the
    repository hosted elsewhere, and don't wish to or cannot use
    GitHub, you can submit your change by requesting that we pull
    the changes from your repository by sending an email to the
    puppet-dev Google Groups mailing list.

    `git-request-pull(1)` provides a handy way to generate the text
    for the email requesting that we pull your changes (and does
    some helpful sanity checks in the process).

  * Mailing patches to the mailing list

    If neither of the previous methods works for you, then you can
    also mail the patches inline to the puppet-dev Google Group
    using either `rake mail_patches`, or by using
    `git-format-patch(1)`, and `git-send-email(1)` directly.

    `rake mail_patches` handles setting the appropriate flags to
    `git-format-patch(1)` and `git-send-email(1)` for you, but
    doesn't allow adding any commentary between the '---', and the
    diffstat in the resulting email.  It also requires that you
    have created your topic branch in the form
    `&lt;type&gt;/&lt;parent&gt;/&lt;name&gt;`.

    If you decide to use `git-format-patch(1)` and
    `git-send-email(1)` directly, please be sure to use the
    following flags for `git-format-patch(1)`: -C -M -s -n
    --subject-prefix='PATCH/puppet'

  * Attaching patches to Redmine

    As a method of last resort you can also directly attach the
    output of `git-format-patch(1)`, or `git-diff(1)` to a Redmine
    ticket.

    If you are generating the diff outside of Git, please be sure
    to generate a unified diff.
</code></pre>

<ol>
<li><p>Update the related Redmine ticket.</p>

<p>If there&#39;s a Redmine ticket associated with the change you
  submitted, then you should update the ticket to include the
  location of your branch, and change the status to &quot;In Topic
  Branch Pending Merge&quot;, along with any other commentary you may
  wish to make.</p></li>
</ol>

<h1>How to track the status of your change after it&#39;s been submitted</h1>

<p>Shortly after opening a pull request on GitHub, there should be an
automatic message sent to the puppet-dev Google Groups mailing list
notifying people of this.  This notification is used to let the Puppet
development community know about your requested change to give them a
chance to review, test, and comment on the change(s).</p>

<p>If you submitted your change via manually sending a pull request or
mailing the patches, then we keep track of these using
<a href="https://patchwork.puppetlabs.com">patchwork</a>.  When code is merged
into the project it is automatically removed from patchwork, and the
Redmine ticket is manually updated with the commit SHA1.  In addition,
the ticket status must be updated by the person who merges the topic
branch to a status of &quot;Merged - Pending Release&quot;</p>

<p>We do our best to comment on or merge submitted changes within a week.
However, if there hasn&#39;t been any commentary on the pull request or
mailed patches, and it hasn&#39;t been merged in after a week, then feel
free to ask for an update by replying on the mailing list to the
automatic notification or mailed patches. It probably wasn&#39;t
intentional, and probably just slipped through the cracks.</p>

<h1>Additional Resources</h1>

<ul>
<li><p><a href="http://projects.puppetlabs.com/projects/puppet/wiki/Getting_Help">Getting additional help</a></p></li>
<li><p><a href="http://projects.puppetlabs.com/projects/puppet/wiki/Development_Writing_Tests">Writing tests</a></p></li>
<li><p><a href="http://projects.puppetlabs.com">Bug tracker (Redmine)</a></p></li>
<li><p><a href="https://patchwork.puppetlabs.com">Patchwork</a></p></li>
<li><p><a href="https://projects.puppetlabs.com/contributor_licenses/sign">Contributor License Agreement</a></p></li>
<li><p><a href="http://help.github.com/">General GitHub documentation</a></p></li>
<li><p><a href="http://help.github.com/send-pull-requests/">GitHub pull request documentation</a></p></li>
</ul>

<h1>If you have commit access to the repository</h1>

<p>Even if you have commit access to the repository, you&#39;ll still need to
go through the process above, and have someone else review and merge
in your changes.  The rule is that all changes must be reviewed by a
developer on the project (that didn&#39;t write the code) to ensure that
all changes go through a code review process.</p>

<p>Having someone other than the author of the topic branch recorded as
performing the merge is the record that they performed the code
review.</p>

<ul>
<li><p>Merging topic branches</p>

<p>When merging code from a topic branch into the integration branch
(Ex: master, 2.7.x, 1.6.x, etc.), there should always be a merge
commit.  You can accomplish this by always providing the <code>--no-ff</code>
flag to <code>git merge</code>.</p>

<pre class="code ruby"><code>git merge --no-ff --log tickets/master/1234-fix-something-broken
</code></pre>

<p>The reason for always forcing this merge commit is that it
provides a consistent way to look up what changes &amp; commits were
in a topic branch, whether that topic branch had one, or 500
commits.  For example, if the merge commit had an abbreviated
SHA-1 of <code>coffeebad</code>, then you could use the following <code>git log</code>
invocation to show you which commits it brought in:</p>

<pre class="code ruby"><code><span class='id identifier rubyid_git'>git</span> <span class='id identifier rubyid_log'>log</span> <span class='id identifier rubyid_coffeebad'>coffeebad</span><span class='op'>^</span><span class='int'>1</span><span class='op'>..</span><span class='id identifier rubyid_coffeebad'>coffeebad</span><span class='op'>^</span><span class='int'>2</span>
</code></pre>

<p>The following would show you which changes were made on the topic
branch:</p>

<pre class="code ruby"><code><span class='id identifier rubyid_git'>git</span> <span class='id identifier rubyid_diff'>diff</span> <span class='id identifier rubyid_coffeebad'>coffeebad</span><span class='op'>^</span><span class='int'>1</span><span class='op'>...</span><span class='id identifier rubyid_coffeebad'>coffeebad</span><span class='op'>^</span><span class='int'>2</span>
</code></pre>

<p>Because we <em>always</em> merge the topic branch into the integration
branch the first parent (<code>^1</code>) of a merge commit will be the most
recent commit on the integration branch from just before we merged
in the topic, and the second parent (<code>^2</code>) will always be the most
recent commit that was made in the topic branch.  This also serves
as the record of who performed the code review, as mentioned
above.</p></li>
</ul>
</div></div>
    
    <div id="footer">
  Generated on Tue Mar  6 02:13:59 2012 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.5 (ruby-1.9.2).
</div>

  </body>
</html>