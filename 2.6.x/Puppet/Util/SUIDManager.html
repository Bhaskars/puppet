<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: Puppet::Util::SUIDManager
  
    &mdash; Documentation by YARD 0.7.5
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/docco.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/docco.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../Puppet.html" title="Puppet (module)">Puppet</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Util.html" title="Puppet::Util (module)">Util</a></span></span>
     &raquo; 
    <span class="title">SUIDManager</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: Puppet::Util::SUIDManager
  
  
  
</h1>

<dl class="box">
  
  
    
      <dt class="r1">Extended by:</dt>
      <dd class="r1">Forwardable</dd>
      
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="Warnings.html" title="Puppet::Util::Warnings (module)">Warnings</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/puppet/util/suidmanager.rb</dd>
  
</dl>
<div class="clear"></div>








  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#root%3F-class_method" title="root? (class method)">+ (Boolean) <strong>root?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#asuser-instance_method" title="#asuser (instance method)">- (Object) <strong>asuser</strong>(new_uid = nil, new_gid = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Runs block setting euid and egid if provided then restoring original ids.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#change_group-instance_method" title="#change_group (instance method)">- (Object) <strong>change_group</strong>(group, permanently = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Changes the egid of the process if `permanently` is not set, otherwise
changes gid.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#change_privileges-instance_method" title="#change_privileges (instance method)">- (Object) <strong>change_privileges</strong>(uid = nil, gid = nil, permanently = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
If `permanently` is set, will permanently change the uid/gid of the
process.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#change_user-instance_method" title="#change_user (instance method)">- (Object) <strong>change_user</strong>(user, permanently = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
As change_group, but operates on uids.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#convert_xid-instance_method" title="#convert_xid (instance method)">- (Object) <strong>convert_xid</strong>(type, id) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Make sure the passed argument is a number.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#groups%3D-instance_method" title="#groups= (instance method)">- (Object) <strong>groups=</strong>(grouplist) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initgroups-instance_method" title="#initgroups (instance method)">- (Object) <strong>initgroups</strong>(uid) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Initialize primary and supplemental groups to those of the target user.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#osx_maj_ver-instance_method" title="#osx_maj_ver (instance method)">- (Object) <strong>osx_maj_ver</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run_and_capture-instance_method" title="#run_and_capture (instance method)">- (Object) <strong>run_and_capture</strong>(command, new_uid = nil, new_gid = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Warnings.html" title="Puppet::Util::Warnings (module)">Warnings</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Warnings.html#clear_warnings-instance_method" title="Puppet::Util::Warnings#clear_warnings (method)">#clear_warnings</a></span>, <span class='object_link'><a href="Warnings.html#notice_once-instance_method" title="Puppet::Util::Warnings#notice_once (method)">#notice_once</a></span>, <span class='object_link'><a href="Warnings.html#warnonce-instance_method" title="Puppet::Util::Warnings#warnonce (method)">#warnonce</a></span></p>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="root?-class_method">
  
    + (<tt>Boolean</tt>) <strong>root?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 40</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_root?'>root?</span>
  <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span> <span class='op'>==</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div><table class="annotated_source_code">
  <tr>
    <td colspan="3" style="padding-left: 10px;">
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 40</span></pre>
    </td>
  </tr>
  
    <tr>
      <td class="comment">
        <span>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">40
41
42
43</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file"><span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_root?'>root?</span>
  <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_uid'>uid</span> <span class='op'>==</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
      </td>
    </tr>
  

</table>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="asuser-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>asuser</strong>(new_uid = nil, new_gid = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Runs block setting euid and egid if provided then restoring original ids.
If running on Windows or without root, the block will be run with the
current euid/egid.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 51</span>

<span class='kw'>def</span> <span class='id identifier rubyid_asuser'>asuser</span><span class='lparen'>(</span><span class='id identifier rubyid_new_uid'>new_uid</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_new_gid'>new_gid</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>yield</span> <span class='kw'>if</span> <span class='const'>Puppet</span><span class='period'>.</span><span class='id identifier rubyid_features'>features</span><span class='period'>.</span><span class='id identifier rubyid_microsoft_windows?'>microsoft_windows?</span>
  <span class='kw'>return</span> <span class='kw'>yield</span> <span class='kw'>unless</span> <span class='id identifier rubyid_root?'>root?</span>
  <span class='kw'>return</span> <span class='kw'>yield</span> <span class='kw'>unless</span> <span class='id identifier rubyid_new_uid'>new_uid</span> <span class='kw'>or</span> <span class='id identifier rubyid_new_gid'>new_gid</span>

  <span class='id identifier rubyid_old_euid'>old_euid</span><span class='comma'>,</span> <span class='id identifier rubyid_old_egid'>old_egid</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_euid'>euid</span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_egid'>egid</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_change_privileges'>change_privileges</span><span class='lparen'>(</span><span class='id identifier rubyid_new_uid'>new_uid</span><span class='comma'>,</span> <span class='id identifier rubyid_new_gid'>new_gid</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>

    <span class='kw'>yield</span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_change_privileges'>change_privileges</span><span class='lparen'>(</span><span class='id identifier rubyid_new_uid'>new_uid</span> <span class='op'>?</span> <span class='id identifier rubyid_old_euid'>old_euid</span> <span class='op'>:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_old_egid'>old_egid</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div><table class="annotated_source_code">
  <tr>
    <td colspan="3" style="padding-left: 10px;">
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 51</span></pre>
    </td>
  </tr>
  
    <tr>
      <td class="comment">
        <span>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">51
52
53
54
55
56
57
58
59
60
61
62
63
64
65</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file"><span class='kw'>def</span> <span class='id identifier rubyid_asuser'>asuser</span><span class='lparen'>(</span><span class='id identifier rubyid_new_uid'>new_uid</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_new_gid'>new_gid</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>yield</span> <span class='kw'>if</span> <span class='const'>Puppet</span><span class='period'>.</span><span class='id identifier rubyid_features'>features</span><span class='period'>.</span><span class='id identifier rubyid_microsoft_windows?'>microsoft_windows?</span>
  <span class='kw'>return</span> <span class='kw'>yield</span> <span class='kw'>unless</span> <span class='id identifier rubyid_root?'>root?</span>
  <span class='kw'>return</span> <span class='kw'>yield</span> <span class='kw'>unless</span> <span class='id identifier rubyid_new_uid'>new_uid</span> <span class='kw'>or</span> <span class='id identifier rubyid_new_gid'>new_gid</span>

  <span class='id identifier rubyid_old_euid'>old_euid</span><span class='comma'>,</span> <span class='id identifier rubyid_old_egid'>old_egid</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_euid'>euid</span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_egid'>egid</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_change_privileges'>change_privileges</span><span class='lparen'>(</span><span class='id identifier rubyid_new_uid'>new_uid</span><span class='comma'>,</span> <span class='id identifier rubyid_new_gid'>new_gid</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>

    <span class='kw'>yield</span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_change_privileges'>change_privileges</span><span class='lparen'>(</span><span class='id identifier rubyid_new_uid'>new_uid</span> <span class='op'>?</span> <span class='id identifier rubyid_old_euid'>old_euid</span> <span class='op'>:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_old_egid'>old_egid</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
      </td>
    </tr>
  

</table>
    
      <div class="method_details ">
  <p class="signature " id="change_group-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>change_group</strong>(group, permanently = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Changes the egid of the process if `permanently` is not set, otherwise
changes gid. This method will fail if used on Windows, or attempting to
change to a different gid without root.
</p>


  </div>
</div>
<div class="tags">
  
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error.html" title="Puppet::Error (class)">Puppet::Error</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90
91
92
93
94
95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 88</span>

<span class='kw'>def</span> <span class='id identifier rubyid_change_group'>change_group</span><span class='lparen'>(</span><span class='id identifier rubyid_group'>group</span><span class='comma'>,</span> <span class='id identifier rubyid_permanently'>permanently</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_gid'>gid</span> <span class='op'>=</span> <span class='id identifier rubyid_convert_xid'>convert_xid</span><span class='lparen'>(</span><span class='symbol'>:gid</span><span class='comma'>,</span> <span class='id identifier rubyid_group'>group</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No such group </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group'>group</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_gid'>gid</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_permanently'>permanently</span>
    <span class='const'>Process</span><span class='op'>::</span><span class='const'>GID</span><span class='period'>.</span><span class='id identifier rubyid_change_privilege'>change_privilege</span><span class='lparen'>(</span><span class='id identifier rubyid_gid'>gid</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_egid'>egid</span> <span class='op'>=</span> <span class='id identifier rubyid_gid'>gid</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div><table class="annotated_source_code">
  <tr>
    <td colspan="3" style="padding-left: 10px;">
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 88</span></pre>
    </td>
  </tr>
  
    <tr>
      <td class="comment">
        <span>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">88
89
90
91
92
93
94
95
96
97
98</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file"><span class='kw'>def</span> <span class='id identifier rubyid_change_group'>change_group</span><span class='lparen'>(</span><span class='id identifier rubyid_group'>group</span><span class='comma'>,</span> <span class='id identifier rubyid_permanently'>permanently</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_gid'>gid</span> <span class='op'>=</span> <span class='id identifier rubyid_convert_xid'>convert_xid</span><span class='lparen'>(</span><span class='symbol'>:gid</span><span class='comma'>,</span> <span class='id identifier rubyid_group'>group</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No such group </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_group'>group</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_gid'>gid</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_permanently'>permanently</span>
    <span class='const'>Process</span><span class='op'>::</span><span class='const'>GID</span><span class='period'>.</span><span class='id identifier rubyid_change_privilege'>change_privilege</span><span class='lparen'>(</span><span class='id identifier rubyid_gid'>gid</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_egid'>egid</span> <span class='op'>=</span> <span class='id identifier rubyid_gid'>gid</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
      </td>
    </tr>
  

</table>
    
      <div class="method_details ">
  <p class="signature " id="change_privileges-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>change_privileges</strong>(uid = nil, gid = nil, permanently = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
If `permanently` is set, will permanently change the uid/gid of the
process. If not, it will only set the euid/egid. If only uid is supplied,
the primary group of the supplied gid will be used. If only gid is
supplied, only gid will be changed. This method will fail if used on
Windows.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74
75
76
77
78
79
80
81
82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 72</span>

<span class='kw'>def</span> <span class='id identifier rubyid_change_privileges'>change_privileges</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_gid'>gid</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_permanently'>permanently</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_uid'>uid</span> <span class='kw'>or</span> <span class='id identifier rubyid_gid'>gid</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_gid'>gid</span>
    <span class='id identifier rubyid_uid'>uid</span> <span class='op'>=</span> <span class='id identifier rubyid_convert_xid'>convert_xid</span><span class='lparen'>(</span><span class='symbol'>:uid</span><span class='comma'>,</span> <span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_gid'>gid</span> <span class='op'>=</span> <span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_getpwuid'>getpwuid</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gid'>gid</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_change_group'>change_group</span><span class='lparen'>(</span><span class='id identifier rubyid_gid'>gid</span><span class='comma'>,</span> <span class='id identifier rubyid_permanently'>permanently</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_change_user'>change_user</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='comma'>,</span> <span class='id identifier rubyid_permanently'>permanently</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_uid'>uid</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div><table class="annotated_source_code">
  <tr>
    <td colspan="3" style="padding-left: 10px;">
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 72</span></pre>
    </td>
  </tr>
  
    <tr>
      <td class="comment">
        <span>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">72
73
74
75
76
77
78
79
80
81
82
83</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file"><span class='kw'>def</span> <span class='id identifier rubyid_change_privileges'>change_privileges</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_gid'>gid</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_permanently'>permanently</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_uid'>uid</span> <span class='kw'>or</span> <span class='id identifier rubyid_gid'>gid</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_gid'>gid</span>
    <span class='id identifier rubyid_uid'>uid</span> <span class='op'>=</span> <span class='id identifier rubyid_convert_xid'>convert_xid</span><span class='lparen'>(</span><span class='symbol'>:uid</span><span class='comma'>,</span> <span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_gid'>gid</span> <span class='op'>=</span> <span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_getpwuid'>getpwuid</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gid'>gid</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_change_group'>change_group</span><span class='lparen'>(</span><span class='id identifier rubyid_gid'>gid</span><span class='comma'>,</span> <span class='id identifier rubyid_permanently'>permanently</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_change_user'>change_user</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='comma'>,</span> <span class='id identifier rubyid_permanently'>permanently</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_uid'>uid</span>
<span class='kw'>end</span></pre>
      </td>
    </tr>
  

</table>
    
      <div class="method_details ">
  <p class="signature " id="change_user-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>change_user</strong>(user, permanently = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
As change_group, but operates on uids. If changing user permanently,
supplementary groups will be set the to default groups for the new uid.
</p>


  </div>
</div>
<div class="tags">
  
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Error.html" title="Puppet::Error (class)">Puppet::Error</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 102</span>

<span class='kw'>def</span> <span class='id identifier rubyid_change_user'>change_user</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_permanently'>permanently</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_uid'>uid</span> <span class='op'>=</span> <span class='id identifier rubyid_convert_xid'>convert_xid</span><span class='lparen'>(</span><span class='symbol'>:uid</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No such user </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_user'>user</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_uid'>uid</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_permanently'>permanently</span>
    <span class='comment'># If changing uid, we must be root. So initgroups first here.
</span>    <span class='id identifier rubyid_initgroups'>initgroups</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span>

    <span class='const'>Process</span><span class='op'>::</span><span class='const'>UID</span><span class='period'>.</span><span class='id identifier rubyid_change_privilege'>change_privilege</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='comment'># We must be root to initgroups, so initgroups before dropping euid if
</span>    <span class='comment'># we're root, otherwise elevate euid before initgroups.
</span>    <span class='comment'># change euid (to root) first.
</span>    <span class='kw'>if</span> <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_euid'>euid</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='id identifier rubyid_initgroups'>initgroups</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span>
      <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_euid'>euid</span> <span class='op'>=</span> <span class='id identifier rubyid_uid'>uid</span>
    <span class='kw'>else</span>
      <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_euid'>euid</span> <span class='op'>=</span> <span class='id identifier rubyid_uid'>uid</span>
      <span class='id identifier rubyid_initgroups'>initgroups</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div><table class="annotated_source_code">
  <tr>
    <td colspan="3" style="padding-left: 10px;">
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 102</span></pre>
    </td>
  </tr>
  
    <tr>
      <td class="comment">
        <span>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">102
103
104
105
106
107</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file">def change_user(user, permanently=false)
  uid = convert_xid(:uid, user)
  raise Puppet::Error, &quot;No such user #{user}&quot; unless uid

  if permanently</pre>
      </td>
    </tr>
  
    <tr>
      <td class="comment">
        <span><div class="docstring">
  <div class="discussion">
    <p>
If changing uid, we must be root. So initgroups first here.
</p>


  </div>
</div>
<div class="tags">
  

</div>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">108
109
110
111
112</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file">    initgroups(uid)

    Process::UID.change_privilege(uid)
  else</pre>
      </td>
    </tr>
  
    <tr>
      <td class="comment">
        <span><div class="docstring">
  <div class="discussion">
    <p>
We must be root to initgroups, so initgroups before dropping euid if
we&#8217;re root, otherwise elevate euid before initgroups. change euid (to
root) first.
</p>


  </div>
</div>
<div class="tags">
  

</div>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">115
116
117
118
119
120
121
122
123
124</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file">    if Process.euid == 0
      initgroups(uid)
      Process.euid = uid
    else
      Process.euid = uid
      initgroups(uid)
    end
  end
end</pre>
      </td>
    </tr>
  

</table>
    
      <div class="method_details ">
  <p class="signature " id="convert_xid-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>convert_xid</strong>(type, id) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Make sure the passed argument is a number.
</p>


  </div>
</div>
<div class="tags">
  
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129
130
131
132
133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 127</span>

<span class='kw'>def</span> <span class='id identifier rubyid_convert_xid'>convert_xid</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_map'>map</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:gid</span> <span class='op'>=&gt;</span> <span class='symbol'>:group</span><span class='comma'>,</span> <span class='symbol'>:uid</span> <span class='op'>=&gt;</span> <span class='symbol'>:user</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid id type </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_map'>map</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ret'>ret</span> <span class='op'>=</span> <span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Util</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_ret'>ret</span> <span class='op'>==</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_map'>map</span><span class='lbracket'>[</span><span class='id identifier rubyid_type'>type</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_ret'>ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div><table class="annotated_source_code">
  <tr>
    <td colspan="3" style="padding-left: 10px;">
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 127</span></pre>
    </td>
  </tr>
  
    <tr>
      <td class="comment">
        <span>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">127
128
129
130
131
132
133
134
135
136</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file"><span class='kw'>def</span> <span class='id identifier rubyid_convert_xid'>convert_xid</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_map'>map</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:gid</span> <span class='op'>=&gt;</span> <span class='symbol'>:group</span><span class='comma'>,</span> <span class='symbol'>:uid</span> <span class='op'>=&gt;</span> <span class='symbol'>:user</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid id type </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_map'>map</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ret'>ret</span> <span class='op'>=</span> <span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Util</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_ret'>ret</span> <span class='op'>==</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_map'>map</span><span class='lbracket'>[</span><span class='id identifier rubyid_type'>type</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_ret'>ret</span>
<span class='kw'>end</span></pre>
      </td>
    </tr>
  

</table>
    
      <div class="method_details ">
  <p class="signature " id="groups=-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>groups=</strong>(grouplist) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33
34
35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 31</span>

<span class='kw'>def</span> <span class='id identifier rubyid_groups='>groups=</span><span class='lparen'>(</span><span class='id identifier rubyid_grouplist'>grouplist</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_osx_maj_ver'>osx_maj_ver</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>10.6</span><span class='tstring_end'>'</span></span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_groups'>groups</span> <span class='op'>=</span> <span class='id identifier rubyid_grouplist'>grouplist</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div><table class="annotated_source_code">
  <tr>
    <td colspan="3" style="padding-left: 10px;">
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 31</span></pre>
    </td>
  </tr>
  
    <tr>
      <td class="comment">
        <span>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">31
32
33
34
35
36
37
38</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file"><span class='kw'>def</span> <span class='id identifier rubyid_groups='>groups=</span><span class='lparen'>(</span><span class='id identifier rubyid_grouplist'>grouplist</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_osx_maj_ver'>osx_maj_ver</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>10.6</span><span class='tstring_end'>'</span></span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_groups'>groups</span> <span class='op'>=</span> <span class='id identifier rubyid_grouplist'>grouplist</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
      </td>
    </tr>
  

</table>
    
      <div class="method_details ">
  <p class="signature " id="initgroups-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>initgroups</strong>(uid) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Initialize primary and supplemental groups to those of the target user.  We
take the UID and manually look up their details in the system database,
including username and primary group. This method will fail on Windows, or
if used without root to initgroups of another user.
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144
145</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 142</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initgroups'>initgroups</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pwent'>pwent</span> <span class='op'>=</span> <span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_getpwuid'>getpwuid</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span>
  <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_initgroups'>initgroups</span><span class='lparen'>(</span><span class='id identifier rubyid_pwent'>pwent</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_pwent'>pwent</span><span class='period'>.</span><span class='id identifier rubyid_gid'>gid</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div><table class="annotated_source_code">
  <tr>
    <td colspan="3" style="padding-left: 10px;">
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 142</span></pre>
    </td>
  </tr>
  
    <tr>
      <td class="comment">
        <span>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">142
143
144
145
146</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file"><span class='kw'>def</span> <span class='id identifier rubyid_initgroups'>initgroups</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pwent'>pwent</span> <span class='op'>=</span> <span class='const'>Etc</span><span class='period'>.</span><span class='id identifier rubyid_getpwuid'>getpwuid</span><span class='lparen'>(</span><span class='id identifier rubyid_uid'>uid</span><span class='rparen'>)</span>
  <span class='const'>Process</span><span class='period'>.</span><span class='id identifier rubyid_initgroups'>initgroups</span><span class='lparen'>(</span><span class='id identifier rubyid_pwent'>pwent</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_pwent'>pwent</span><span class='period'>.</span><span class='id identifier rubyid_gid'>gid</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
      </td>
    </tr>
  

</table>
    
      <div class="method_details ">
  <p class="signature " id="osx_maj_ver-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>osx_maj_ver</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19
20
21
22
23
24
25
26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 17</span>

<span class='kw'>def</span> <span class='id identifier rubyid_osx_maj_ver'>osx_maj_ver</span>
  <span class='kw'>return</span> <span class='ivar'>@osx_maj_ver</span> <span class='kw'>unless</span> <span class='ivar'>@osx_maj_ver</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>facter</span><span class='tstring_end'>'</span></span>
  <span class='comment'># 'kernel' is available without explicitly loading all facts
</span>  <span class='kw'>if</span> <span class='const'>Facter</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>kernel</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Darwin</span><span class='tstring_end'>'</span></span>
    <span class='ivar'>@osx_maj_ver</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>return</span> <span class='ivar'>@osx_maj_ver</span>
  <span class='kw'>end</span>
  <span class='comment'># But 'macosx_productversion_major' requires it.
</span>  <span class='const'>Facter</span><span class='period'>.</span><span class='id identifier rubyid_loadfacts'>loadfacts</span>
  <span class='ivar'>@osx_maj_ver</span> <span class='op'>=</span> <span class='const'>Facter</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>macosx_productversion_major</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div><table class="annotated_source_code">
  <tr>
    <td colspan="3" style="padding-left: 10px;">
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 17</span></pre>
    </td>
  </tr>
  
    <tr>
      <td class="comment">
        <span>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">17
18
19
20</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file">def osx_maj_ver
  return @osx_maj_ver unless @osx_maj_ver.nil?
  require 'facter'</pre>
      </td>
    </tr>
  
    <tr>
      <td class="comment">
        <span><div class="docstring">
  <div class="discussion">
    <p>
&#8216;kernel&#8217; is available without explicitly loading all facts
</p>


  </div>
</div>
<div class="tags">
  

</div>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">21
22
23
24
25</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file">  <span class='kw'>if</span> <span class='const'>Facter</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>kernel</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Darwin</span><span class='tstring_end'>'</span></span>
    <span class='ivar'>@osx_maj_ver</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>return</span> <span class='ivar'>@osx_maj_ver</span>
  <span class='kw'>end</span></pre>
      </td>
    </tr>
  
    <tr>
      <td class="comment">
        <span><div class="docstring">
  <div class="discussion">
    <p>
But &#8216;macosx_productversion_major&#8217; requires it.
</p>


  </div>
</div>
<div class="tags">
  

</div>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">26
27
28
29</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file">  Facter.loadfacts
  @osx_maj_ver = Facter.value('macosx_productversion_major')
end</pre>
      </td>
    </tr>
  

</table>
    
      <div class="method_details ">
  <p class="signature " id="run_and_capture-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>run_and_capture</strong>(command, new_uid = nil, new_gid = nil) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


149
150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 149</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run_and_capture'>run_and_capture</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='id identifier rubyid_new_uid'>new_uid</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_new_gid'>new_gid</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Util</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='symbol'>:failonfail</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='symbol'>:combine</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:uid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_uid'>new_uid</span><span class='comma'>,</span> <span class='symbol'>:gid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_gid'>new_gid</span><span class='rparen'>)</span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='gvar'>$CHILD_STATUS</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div><table class="annotated_source_code">
  <tr>
    <td colspan="3" style="padding-left: 10px;">
      <pre class="code"><span class="info file"># File 'lib/puppet/util/suidmanager.rb', line 149</span></pre>
    </td>
  </tr>
  
    <tr>
      <td class="comment">
        <span>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">149
150
151
152
153</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file"><span class='kw'>def</span> <span class='id identifier rubyid_run_and_capture'>run_and_capture</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='id identifier rubyid_new_uid'>new_uid</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_new_gid'>new_gid</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Util</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='symbol'>:failonfail</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='symbol'>:combine</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:uid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_uid'>new_uid</span><span class='comma'>,</span> <span class='symbol'>:gid</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_new_gid'>new_gid</span><span class='rparen'>)</span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='gvar'>$CHILD_STATUS</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
      </td>
    </tr>
  

</table>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Tue Mar  6 02:14:16 2012 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.5 (ruby-1.9.2).
</div>

  </body>
</html>