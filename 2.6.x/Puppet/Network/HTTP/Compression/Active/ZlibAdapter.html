<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Puppet::Network::HTTP::Compression::Active::ZlibAdapter
  
    &mdash; Documentation by YARD 0.7.5
  
</title>

  <link rel="stylesheet" href="../../../../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../../../../css/common.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../../../../css/docco.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../../../../..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../../../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../../../js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../../../js/docco.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../../../../_index.html">Index (Z)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../../../../Puppet.html" title="Puppet (module)">Puppet</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../../Network.html" title="Puppet::Network (module)">Network</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../HTTP.html" title="Puppet::Network::HTTP (module)">HTTP</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Compression.html" title="Puppet::Network::HTTP::Compression (module)">Compression</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Active.html" title="Puppet::Network::HTTP::Compression::Active (module)">Active</a></span></span>
     &raquo; 
    <span class="title">ZlibAdapter</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Puppet::Network::HTTP::Compression::Active::ZlibAdapter
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../../../../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../../../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Puppet::Network::HTTP::Compression::Active::ZlibAdapter</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/puppet/network/http/compression.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
This adapters knows how to uncompress both &#8216;zlib&#8217; stream (the
deflate algorithm from Content-Encoding) and GZip streams.
</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close-instance_method" title="#close (instance method)">- (Object) <strong>close</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (ZlibAdapter) <strong>initialize</strong> </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of ZlibAdapter.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uncompress-instance_method" title="#uncompress (instance method)">- (Object) <strong>uncompress</strong>(chunk) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Puppet::Network::HTTP::Compression::Active::ZlibAdapter (class)">ZlibAdapter</a></span></tt>) <strong>initialize</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of ZlibAdapter
</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58
59
60
61
62
63
64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/network/http/compression.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='comment'># Create an inflater that knows to parse GZip streams and zlib streams.
</span>  <span class='comment'># This uses a property of the C Zlib library, documented as follow:
</span>  <span class='comment'>#   windowBits can also be greater than 15 for optional gzip decoding. Add
</span>  <span class='comment'>#   32 to windowBits to enable zlib and gzip decoding with automatic header
</span>  <span class='comment'>#   detection, or add 16 to decode only the gzip format (the zlib format will
</span>  <span class='comment'>#   return a Z_DATA_ERROR).  If a gzip stream is being decoded, strm-&gt;adler is
</span>  <span class='comment'>#   a crc32 instead of an adler32.
</span>  <span class='ivar'>@uncompressor</span> <span class='op'>=</span> <span class='const'>Zlib</span><span class='op'>::</span><span class='const'>Inflate</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='int'>15</span> <span class='op'>+</span> <span class='int'>32</span><span class='rparen'>)</span>
  <span class='ivar'>@first</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div><table class="annotated_source_code">
  <tr>
    <td colspan="3" style="padding-left: 10px;">
      <pre class="code"><span class="info file"># File 'lib/puppet/network/http/compression.rb', line 56</span></pre>
    </td>
  </tr>
  
    <tr>
      <td class="comment">
        <span>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">56
57</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file">def initialize</pre>
      </td>
    </tr>
  
    <tr>
      <td class="comment">
        <span><div class="docstring">
  <div class="discussion">
    <p>
Create an inflater that knows to parse GZip streams and zlib streams. This
uses a property of the C Zlib library, documented as follow:
</p>
<pre class="code ruby"><code>
  windowBits can also be greater than 15 for optional gzip decoding. Add
  32 to windowBits to enable zlib and gzip decoding with automatic header
  detection, or add 16 to decode only the gzip format (the zlib format will
  return a Z_DATA_ERROR).  If a gzip stream is being decoded, strm-&gt;adler is
  a crc32 instead of an adler32.</code></pre>


  </div>
</div>
<div class="tags">
  

</div>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">64
65
66
67</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file">  @uncompressor = Zlib::Inflate.new(15 + 32)
  @first = true
end</pre>
      </td>
    </tr>
  

</table>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="close-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>close</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


85
86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/network/http/compression.rb', line 85</span>

<span class='kw'>def</span> <span class='id identifier rubyid_close'>close</span>
  <span class='ivar'>@uncompressor</span><span class='period'>.</span><span class='id identifier rubyid_finish'>finish</span>
  <span class='ivar'>@uncompressor</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div><table class="annotated_source_code">
  <tr>
    <td colspan="3" style="padding-left: 10px;">
      <pre class="code"><span class="info file"># File 'lib/puppet/network/http/compression.rb', line 85</span></pre>
    </td>
  </tr>
  
    <tr>
      <td class="comment">
        <span>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">85
86
87
88
89</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file"><span class='kw'>def</span> <span class='id identifier rubyid_close'>close</span>
  <span class='ivar'>@uncompressor</span><span class='period'>.</span><span class='id identifier rubyid_finish'>finish</span>
  <span class='ivar'>@uncompressor</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
<span class='kw'>end</span></pre>
      </td>
    </tr>
  

</table>
    
      <div class="method_details ">
  <p class="signature " id="uncompress-instance_method">
  
    - (<tt><span class='object_link'><a href="../../../../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>uncompress</strong>(chunk) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/network/http/compression.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_uncompress'>uncompress</span><span class='lparen'>(</span><span class='id identifier rubyid_chunk'>chunk</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_out'>out</span> <span class='op'>=</span> <span class='ivar'>@uncompressor</span><span class='period'>.</span><span class='id identifier rubyid_inflate'>inflate</span><span class='lparen'>(</span><span class='id identifier rubyid_chunk'>chunk</span><span class='rparen'>)</span>
  <span class='ivar'>@first</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_out'>out</span>
<span class='kw'>rescue</span> <span class='const'>Zlib</span><span class='op'>::</span><span class='const'>DataError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_z'>z</span>
  <span class='comment'># it can happen that we receive a raw deflate stream
</span>  <span class='comment'># which might make our inflate throw a data error.
</span>  <span class='comment'># in this case, we try with a verbatim (no header)
</span>  <span class='comment'># deflater.
</span>  <span class='ivar'>@uncompressor</span> <span class='op'>=</span> <span class='const'>Zlib</span><span class='op'>::</span><span class='const'>Inflate</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='kw'>if</span> <span class='ivar'>@first</span> <span class='kw'>then</span>
    <span class='ivar'>@first</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>retry</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_raise'>raise</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div><table class="annotated_source_code">
  <tr>
    <td colspan="3" style="padding-left: 10px;">
      <pre class="code"><span class="info file"># File 'lib/puppet/network/http/compression.rb', line 68</span></pre>
    </td>
  </tr>
  
    <tr>
      <td class="comment">
        <span>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">68
69
70
71
72
73</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file">def uncompress(chunk)
  out = @uncompressor.inflate(chunk)
  @first = false
  return out
rescue Zlib::DataError =&gt; z</pre>
      </td>
    </tr>
  
    <tr>
      <td class="comment">
        <span><div class="docstring">
  <div class="discussion">
    <p>
it can happen that we receive a raw deflate stream which might make our
inflate throw a data error. in this case, we try with a verbatim (no
header) deflater.
</p>


  </div>
</div>
<div class="tags">
  

</div>  
      </td>
      <td class="line-numbers">
        <pre class="lines" style="padding-right: 0px;">77
78
79
80
81
82
83
84</pre>
      </td>
      <td class="code">
        <pre class="code"><span class="info file">  @uncompressor = Zlib::Inflate.new
  if @first then
    @first = false
    retry
  end
  raise
end</pre>
      </td>
    </tr>
  

</table>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Tue Mar  6 02:14:28 2012 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.5 (ruby-1.9.2).
</div>

  </body>
</html>